<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini CapCut Web</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #1e1e1e;
        color: white;
        display: flex;
        flex-direction: column;
        height: 100vh;
    }
    header {
        background: #111;
        padding: 10px;
        text-align: center;
        font-size: 1.5em;
        font-weight: bold;
    }
    #editor {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 10px;
        gap: 10px;
    }
    #videoContainer {
        flex: 1;
        background: black;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }
    video {
        max-width: 100%;
        max-height: 100%;
        background: black;
    }
    #timeline {
        height: 80px;
        background: #222;
        display: flex;
        align-items: center;
        padding: 5px;
        overflow-x: auto;
        gap: 5px;
    }
    .clip {
        width: 100px;
        height: 70px;
        background: #444;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 5px;
        user-select: none;
    }
    #controls {
        display: flex;
        gap: 10px;
        justify-content: center;
        padding: 10px 0;
    }
    button {
        background: #333;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
    }
    button:hover {
        background: #555;
    }
    #textOverlay {
        position: absolute;
        color: white;
        font-size: 2em;
        pointer-events: none;
    }
</style>
</head>
<body>

<header>Mini CapCut Web</header>

<div id="editor">
    <div id="videoContainer">
        <video id="video" controls></video>
        <div id="textOverlay"></div>
    </div>

    <input type="file" id="videoInput" accept="video/*">

    <div id="controls">
        <button id="playPause">▶️ Play/Pause</button>
        <button id="addText">✏️ Ajouter Texte</button>
        <button id="cutVideo">✂️ Couper Vidéo</button>
    </div>

    <div id="timeline"></div>
</div>

<script>
    const video = document.getElementById('video');
    const videoInput = document.getElementById('videoInput');
    const playPauseBtn = document.getElementById('playPause');
    const addTextBtn = document.getElementById('addText');
    const cutBtn = document.getElementById('cutVideo');
    const timeline = document.getElementById('timeline');
    const textOverlay = document.getElementById('textOverlay');

    let clips = [];

    videoInput.addEventListener('change', e => {
        const file = e.target.files[0];
        if (file) {
            video.src = URL.createObjectURL(file);
        }
    });

    playPauseBtn.addEventListener('click', () => {
        if (video.paused) video.play();
        else video.pause();
    });

    addTextBtn.addEventListener('click', () => {
        const text = prompt('Entrez votre texte:');
        if (text) {
            textOverlay.textContent = text;
            textOverlay.style.left = '50%';
            textOverlay.style.top = '50%';
            textOverlay.style.transform = 'translate(-50%, -50%)';
        }
    });

    cutBtn.addEventListener('click', () => {
        const start = prompt('Start time (sec):');
        const end = prompt('End time (sec):');
        if (!isNaN(start) && !isNaN(end) && start < end) {
            const clip = {start: parseFloat(start), end: parseFloat(end)};
            clips.push(clip);
            const clipDiv = document.createElement('div');
            clipDiv.className = 'clip';
            clipDiv.textContent = `${clip.start}s - ${clip.end}s`;
            clipDiv.addEventListener('click', () => {
                video.currentTime = clip.start;
                video.play();
                const checkInterval = setInterval(() => {
                    if (video.currentTime >= clip.end) {
                        video.pause();
                        clearInterval(checkInterval);
                    }
                }, 100);
            });
            timeline.appendChild(clipDiv);
        } else {
            alert('Temps invalide');
        }
    });
</script>

</body>
</html>